<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>触診マニュアル（頚部・上肢）完全攻略マスター</title>
<style>
    body { font-family: "Helvetica Neue", Arial, sans-serif; line-height: 1.6; color: #333; background-color: #f0f8ff; margin: 0; padding: 20px; }
    .container { max-width: 800px; margin: 0 auto; background: #fff; padding: 25px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.08); position: relative; }
    h1 { text-align: center; color: #0056b3; margin-bottom: 25px; font-size: 1.8em; border-bottom: 2px solid #eee; padding-bottom: 15px; }
    .reset-btn { position: absolute; top: 20px; right: 20px; background: #95a5a6; color: #fff; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.85em; transition: 0.3s; }
    .reset-btn:hover { background: #7f8c8d; }
    .status-bar { background: #e3f2fd; padding: 12px 20px; border-radius: 8px; display: flex; justify-content: space-between; color: #0277bd; font-weight: bold; margin-bottom: 25px; }
    .question-box { background: #f9f9f9; border-left: 6px solid #0056b3; padding: 20px; margin-bottom: 25px; font-size: 1.15em; font-weight: bold; line-height: 1.5; }
    .option-btn { display: block; width: 100%; padding: 15px; margin-bottom: 12px; background: #fff; border: 2px solid #e0e0e0; border-radius: 8px; text-align: left; cursor: pointer; transition: all 0.2s; font-size: 1em; color: #444; }
    .option-btn:hover { background-color: #f0f8ff; border-color: #0056b3; }
    .option-btn.correct { background-color: #d4edda; border-color: #28a745; color: #155724; }
    .option-btn.incorrect { background-color: #f8d7da; border-color: #dc3545; color: #721c24; }
    .feedback { display: none; margin-top: 20px; padding: 20px; border-radius: 8px; background: #f1f8e9; border: 1px solid #c8e6c9; color: #2e7d32; animation: fadeIn 0.3s; }
    .feedback.error { background: #fdecea; border: 1px solid #fadbd8; color: #7b241c; }
    .source-ref { display: block; margin-top: 8px; font-size: 0.85em; color: #666; text-align: right; font-style: italic; }
    .next-btn { display: block; width: 100%; padding: 18px; background: #0056b3; color: #fff; border: none; border-radius: 8px; font-size: 1.2em; font-weight: bold; cursor: pointer; margin-top: 25px; opacity: 0.6; pointer-events: none; transition: 0.3s; }
    .next-btn.active { opacity: 1; pointer-events: auto; }
    .next-btn:hover { background-color: #004494; }
    #result-screen { display: none; text-align: center; padding: 20px; }
    .score-circle { width: 150px; height: 150px; background: #0056b3; color: #fff; border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center; margin: 30px auto; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
    .score-num { font-size: 3.5em; font-weight: bold; line-height: 1; }
    .score-label { font-size: 0.9em; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
</style>
</head>
<body>
<div class="container">
    <div id="start-screen" style="text-align: center; padding: 40px 0;">
        <h1 style="border: none;">触診マニュアル（頚部・上肢）<br>完全攻略マスター</h1>
        <p style="font-size: 1.1em; margin-bottom: 30px;">全250問のプールから<br>ランダムに30問出題されます。</p>
        <p style="font-size: 0.9em; color: #7f8c8d; margin-bottom: 40px;">合格ライン: 80%以上</p>
        <button class="next-btn active" onclick="startQuiz()">試験を開始する</button>
    </div>

    <div id="quiz-screen" style="display: none;">
        <button class="reset-btn" onclick="resetQuiz()">最初に戻る</button>
        <h1>触診クイズ</h1>
        <div class="status-bar">
            <span id="progress">問 1 / 30</span>
            <span id="score">正解数: 0</span>
        </div>
        <div id="question" class="question-box"></div>
        <div id="options"></div>
        <div id="feedback" class="feedback"></div>
        <button id="next-btn" class="next-btn" onclick="nextQuestion()">次の問題へ</button>
    </div>

    <div id="result-screen">
        <h2>試験終了</h2>
        <div class="score-circle">
            <span class="score-num" id="final-score">0</span>
            <span class="score-label">点 / 30点</span>
        </div>
        <p id="result-comment" style="font-size: 1.2em; margin: 20px 0;"></p>
        <button class="next-btn active" onclick="resetQuiz(true)">もう一度挑戦する</button>
    </div>
</div>

<script>
// --- 問題プール パート1 (頚部・肩甲帯・上腕) ---
const poolPart1 = [
    // 頭部・頚部（骨）
    {q:"乳様突起はどの骨の一部か？",o:["後頭骨","側頭骨","頭頂骨","下顎骨"],c:1,r:"乳様突起は側頭骨の一部で、耳孔の後下方に突出しています。",s:"3ページ"},
    {q:"外後頭隆起から両側に水平に走る骨隆起の名前は？",o:["上項線","下項線","側頭線","矢状縫合"],c:0,r:"外後頭隆起の両側を水平に走るのが上項線です。",s:"3ページ"},
    {q:"下項線は上項線の約何横指下方に位置するか？",o:["1横指","2横指","4横指","同じ高さ"],c:1,r:"上項線の2横指ほど下方に下項線があります。",s:"3ページ"},
    {q:"頭部の重さは体重の約何％と言われているか？",o:["3%","8%","15%","20%"],c:1,r:"頭部は体重の約8%（60kgの人で約5kg）の重量があります。",s:"4ページ"},
    {q:"第7頚椎棘突起と第1胸椎棘突起を鑑別する方法は？",o:["頚部を屈曲して回旋させる","頚部を伸展させる","深呼吸させる","肩をすくめる"],c:0,r:"頚部屈曲位で回旋させた際、棘突起が動けばC7、動かなければT1と判断します。",s:"7ページ"},
    {q:"軸椎（第2頚椎）棘突起の触診位置は？",o:["後頭部のすぐ下","項部の最上部中央","C7の上","乳様突起の真横"],c:1,r:"首の後ろ（項部）の最上部中央で触れる骨の膨らみです。",s:"10ページ"},
    {q:"第1頚椎（環椎）横突起の触診位置は？",o:["乳様突起と下顎角の中央","乳様突起の後ろ","下顎角の前","C2棘突起の真横"],c:0,r:"乳様突起と下顎角の中央を外側から触れると直下にあります。",s:"9ページ"},
    {q:"頭部前方位（前方頭位）の原因となりやすい過活動筋は？",o:["胸鎖乳突筋","肩甲挙筋","僧帽筋下部","前鋸筋"],c:1,r:"第1〜4頚椎横突起と肩甲骨上角を結ぶ肩甲挙筋の過活動が要因と言われています。",s:"8ページ"},

    // 頚部（筋）
    {q:"前斜角筋と中斜角筋の間を通過する神経組織は？",o:["腕神経叢","副神経","迷走神経","横隔神経"],c:0,r:"前斜角筋と中斜角筋の間（斜角筋隙）を腕神経叢が通過します。",s:"12ページ"},
    {q:"胸鎖乳突筋を触診する際、顔をどう向けると筋が浮き出るか？",o:["同側回旋・対側側屈","対側回旋・同側側屈","伸展","屈曲"],c:1,r:"顔を反対に向け（対側回旋）、首を同側に傾ける（同側側屈）と浮き出ます。",s:"35ページ"},
    {q:"大後頭神経の絞扼に関与しやすい筋群は？",o:["後頭下筋群","胸鎖乳突筋","斜角筋","広頸筋"],c:0,r:"第1頚椎と第2頚椎の間や後頭下筋群の過緊張により絞扼が生じやすいです。",s:"8ページ"},
    {q:"前斜角筋の停止部はどこか？",o:["第1肋骨","第2肋骨","鎖骨","肩甲骨"],c:0,r:"C3-6横突起から起こり、第1肋骨に停止します。",s:"12ページ"},
    {q:"中斜角筋の触診で、僧帽筋上部線維との位置関係は？",o:["僧帽筋の前方","僧帽筋の後方","僧帽筋の深層","僧帽筋の上"],c:0,r:"僧帽筋上部線維の前方に指を並べて触診します。",s:"15ページ"},

    // 鎖骨・胸郭（骨）
    {q:"鎖骨骨幹部の形状は？",o:["直線状","S字状","円形","L字状"],c:1,r:"上方から見るとS字状ですが、前方から見るとほぼ直線状です。",s:"21ページ"},
    {q:"鎖骨を内側にたどっていくと触れる関節は？",o:["肩鎖関節","胸鎖関節","腕尺関節","椎間関節"],c:1,r:"鎖骨の内側端には胸鎖関節があります。",s:"21ページ"},
    {q:"鎖骨を外側にたどっていくと触れる関節は？",o:["肩鎖関節","胸鎖関節","肩甲上腕関節","肋椎関節"],c:0,r:"鎖骨の外側端には肩鎖関節があります。",s:"21ページ"},
    {q:"上肢挙上時に鎖骨はどう動くか？",o:["下制・前方回旋","挙上・後方回旋","動かない","回旋のみ"],c:1,r:"鎖骨外側端は挙上し、同時に後方へ回旋（転がる）します。",s:"22ページ"},
    {q:"胸骨角（ルイス角）の高さにある肋骨は？",o:["第1肋骨","第2肋骨","第3肋骨","第4肋骨"],c:1,r:"胸骨柄と胸骨体の結合部（胸骨角）の高さには第2肋骨があります。",s:"26ページ"},
    {q:"肩甲骨下角の高さに一致する肋骨は？",o:["第2肋骨","第5肋骨","第7肋骨","第10肋骨"],c:2,r:"肩甲骨下角は第7〜8胸椎の間にあり、第7肋骨とほぼ同じ高さです。",s:"28ページ"},
    {q:"第11肋骨の触診の基準となる部位は？",o:["腸骨稜","肩甲骨下角","第12肋骨","剣状突起"],c:0,r:"腸骨稜の最外側部から3〜4横指上方に第11肋骨先端があります。",s:"26ページ"},
    {q:"呼吸時、上位肋骨の動きはどのように例えられるか？",o:["バケツハンドル","ポンプハンドル","ピストン","シーソー"],c:1,r:"上位肋骨は前後に広がるポンプハンドル運動を行います。",s:"28ページ"},
    {q:"呼吸時、下位肋骨の動きはどのように例えられるか？",o:["バケツハンドル","ポンプハンドル","ピストン","回旋"],c:0,r:"下位肋骨は左右に広がるバケツハンドル運動を行います。",s:"28ページ"},

    // 肩甲骨（骨）
    {q:"肩甲骨上角の位置は、胸椎のどの高さにあるか？",o:["T1-T2間","T3-T4間","T7-T8間","C7"],c:0,r:"上角はT1とT2の間に位置します。",s:"18ページ"},
    {q:"肩甲骨下角の位置は、胸椎のどの高さにあるか？",o:["T1-T2間","T3-T4間","T7-T8間","T10"],c:2,r:"下角はT7とT8の間に位置します。",s:"18ページ"},
    {q:"肩甲骨上角を触診する際のイメージは？",o:["肩甲棘より前方にある","肩甲棘より後方にある","肩峰と同じ高さ","背骨の真上"],c:0,r:"上角は肩甲棘よりも前方（深部）にあることをイメージして触れます。",s:"17ページ"},
    {q:"肩甲骨下角を触診しやすくするための動作は？",o:["下垂","結帯動作（内旋）","挙上","外転"],c:2,r:"手を頭上まで挙上すると、下角が胸郭の外側まで移動して触れやすくなります。",s:"17ページ"},
    {q:"翼状肩甲の原因となる筋機能低下は？",o:["僧帽筋","前鋸筋","菱形筋","三角筋"],c:1,r:"前鋸筋の機能低下により、肩甲骨内側縁が浮き上がります。",s:"18ページ"},
    {q:"肩峰角はどこの境目にあるか？",o:["肩峰外側縁と後縁の角","肩峰と鎖骨の間","烏口突起の上","上腕骨頭の上"],c:0,r:"肩峰の外側縁を後方にたどると直角に曲がる角が肩峰角です。",s:"45ページ"},
    {q:"肩甲棘を触診する位置は？",o:["肩の前方","肩の後方","腋窩","首の横"],c:1,r:"肩の後方で横走する骨隆起として触れられます。",s:"45ページ"},
    {q:"烏口突起の触診位置は？",o:["鎖骨外側1/4の下方","鎖骨の内側","肩峰の上","腋窩の奥"],c:0,r:"鎖骨外側1/4、鎖骨下縁から指1本分下方の深部にあります。",s:"49ページ"},

    // 上腕骨（骨）
    {q:"上腕骨大結節、小結節、結節間溝を触診する際に行う運動は？",o:["屈曲・伸展","内転・外転","内旋・外旋（ワイパー運動）","挙上"],c:2,r:"肘を曲げて手をワイパーのように動かすと、指の下で結節が移動します。",s:"50ページ"},
    {q:"上腕骨大結節に付着しない筋は？",o:["棘上筋","棘下筋","小円筋","肩甲下筋"],c:3,r:"肩甲下筋は小結節に付着します。",s:"51ページ"},
    {q:"結節間溝を走行する組織は？",o:["上腕二頭筋長頭腱","上腕二頭筋短頭腱","上腕三頭筋腱","胸鎖乳突筋"],c:0,r:"結節間溝には上腕二頭筋長頭腱が通ります。",s:"51ページ"},
    {q:"上腕骨小結節を触診する際、肩関節をどうすると正面に来るか？",o:["内旋","外旋","屈曲","伸展"],c:1,r:"外旋すると小結節が正面に出てきます。",s:"50ページ"},
    {q:"三角筋粗面の位置は？",o:["上腕骨近位","上腕骨中央外側","上腕骨遠位","肘関節"],c:1,r:"上腕骨の中央外側面にあり、三角筋が停止します。",s:"60ページ"},
    {q:"橈骨神経溝がある場所は？",o:["上腕骨前面","上腕骨後面（中央）","上腕骨内側","上腕骨外側上顆"],c:1,r:"上腕骨後面の中央付近を斜めに走行しています。",s:"61ページ"},

    // 肩関節周囲（靭帯・軟部組織）
    {q:"烏口肩峰靭帯が形成するアーチの下にある関節は？",o:["第1肩関節","第2肩関節","胸鎖関節","肩鎖関節"],c:1,r:"烏口肩峰アーチの下には第2肩関節（機能的関節）があります。",s:"46ページ"},
    {q:"第2肩関節を構成する組織に含まれないのは？",o:["肩峰下滑液包","腱板","大結節","関節唇"],c:3,r:"関節唇は第1肩関節（肩甲上腕関節）の構成要素です。",s:"46ページ"},
    {q:"肩鎖靭帯の緊張を確認する動作は？",o:["肩を挙上する","肩を真下に押し下げる","肩を前に出す","首を回す"],c:1,r:"肩を押し下げると肩鎖関節の段差が大きくなり、靭帯が緊張します。",s:"65ページ"},
    {q:"烏口鎖骨靭帯（円錐靭帯）を触診する位置は？",o:["烏口突起から指2本分内側","肩峰の上","鎖骨の外端","大結節"],c:0,r:"烏口突起と鎖骨の間、やや内側後方で触れます。",s:"66ページ"},
    {q:"烏口上腕靭帯が緊張する肢位は？",o:["内旋","外旋","屈曲","内転"],c:1,r:"上腕を下垂した状態で外旋させると緊張します。",s:"68ページ"},
    {q:"五十肩の外旋制限に大きく関与するとされる靭帯は？",o:["烏口肩峰靭帯","烏口上腕靭帯","肩鎖靭帯","横上腕靭帯"],c:1,r:"烏口上腕靭帯の肥厚や瘢痕化は外旋制限の主要因となります。",s:"64ページ"},

    // 肩・上腕（筋）
    {q:"大胸筋鎖骨部と三角筋前部線維の間にある窪みを何というか？",o:["モーレンハイム窩（三角胸筋溝）","鎖骨上窩","腋窩","スカルパ三角"],c:0,r:"大胸筋と三角筋の境界にある窪みです。",s:"73ページ"},
    {q:"大胸筋腹部線維の収縮を確認する動作は？",o:["腕を上げる","壁に手をつき、内下方に力を入れる","外に開く","肘を伸ばす"],c:1,r:"肩関節の伸展・内転方向（内下方）へ力を入れると収縮します。",s:"75ページ"},
    {q:"三角筋前部線維の触診で、起始部となる骨は？",o:["鎖骨外側1/3","肩峰","肩甲棘","烏口突起"],c:0,r:"前部線維は鎖骨外側1/3から起始します。",s:"76ページ"},
    {q:"三角筋中部線維の起始部は？",o:["鎖骨","肩峰","肩甲棘","上腕骨"],c:1,r:"中部線維は肩峰から起始します。",s:"89ページ"},
    {q:"三角筋後部線維の起始部は？",o:["鎖骨","肩峰","肩甲棘","大結節"],c:2,r:"後部線維は肩甲棘から起始します。",s:"90ページ"},
    {q:"肩甲下筋を触診する際、指を入れる場所は？",o:["肩の上","腋窩の深部","背中","鎖骨の下"],c:1,r:"腋窩（脇の下）の奥、肩甲骨の前面（肋骨面）に向けて指を入れます。",s:"77ページ"},
    {q:"肩甲下筋の停止部は？",o:["大結節","小結節","結節間溝","烏口突起"],c:1,r:"上腕骨の小結節に停止します。",s:"78ページ"},
    {q:"烏口腕筋を触診する際の肢位は？",o:["肩外転・外旋位","肩内転・内旋位","下垂位","結帯位"],c:0,r:"肩を開いた状態（外転・外旋）で上腕内側を触れ、水平内転させると収縮します。",s:"79ページ"},
    {q:"上腕二頭筋長頭腱の触診位置は？",o:["結節間溝","大結節","小結節","肘窩"],c:0,r:"大結節と小結節の間の結節間溝を走行しています。",s:"81ページ"},
    {q:"上腕二頭筋短頭の起始部は？",o:["関節上結節","烏口突起","関節下結節","小結節"],c:1,r:"短頭は烏口突起から起始します。",s:"82ページ"},
    {q:"上腕筋の外側縁は、どの筋とどの筋の間にあるか？",o:["上腕二頭筋と腕橈骨筋","上腕三頭筋と三角筋","大胸筋と広背筋","回外筋と円回内筋"],c:0,r:"上腕二頭筋と腕橈骨筋の隙間から上腕筋の外側を触れることができます。",s:"84ページ"},
    {q:"広背筋を触診する際、収縮させる動作は？",o:["座面を押し下げて体を持ち上げる（プッシュアップ）","万歳する","腕を前に出す","肘を曲げる"],c:0,r:"椅子に座って手でお尻を持ち上げる動作で強く収縮します。",s:"88ページ"},
    {q:"棘上筋の触診部位は？",o:["棘上窩","棘下窩","肩甲骨内側縁","烏口突起"],c:0,r:"肩甲棘の上方にある棘上窩で触診します。",s:"91ページ"},
    {q:"棘下筋の横走線維を触診する際の抵抗運動は？",o:["内旋","外旋","屈曲","伸展"],c:1,r:"下垂位で外旋させると収縮が確認できます。",s:"92ページ"},
    {q:"小円筋の作用は？",o:["内旋","外旋","外転","屈曲"],c:1,r:"肩関節の外旋に作用します。",s:"93ページ"},
    {q:"大円筋と広背筋の鑑別で、大円筋の特徴は？",o:["骨盤から起こる","肩甲骨下角から起こり、腋窩に向かう","首から起こる","腕の全面を通る"],c:1,r:"大円筋は肩甲骨下角付近から起始し、広背筋よりも上方を走行します。",s:"94ページ"},
    {q:"上腕三頭筋長頭の起始部は？",o:["関節上結節","関節下結節","烏口突起","肩峰"],c:1,r:"肩甲骨の関節下結節から起始します。",s:"97ページ"},
    {q:"上腕三頭筋内側頭を触診する位置は？",o:["上腕外側","上腕内側の下部（長頭の深層）","肩の上","肘の前"],c:1,r:"上腕骨の背面、長頭と外側頭の深層・内側に位置します。",s:"95ページ"},
    {q:"上腕三頭筋外側頭と長頭の境界を確認する動作は？",o:["肘の伸展","肘の屈曲","手首の回転","肩の挙上"],c:0,r:"肘を伸ばしてテーブルを押すと、両頭の境界が溝として触れます。",s:"96ページ"},
    {q:"棘上筋の停止部は？",o:["大結節上面","大結節中面","大結節下面","小結節"],c:0,r:"大結節の上面（一番上）に停止します。",s:"51ページ"},
    {q:"棘下筋の停止部は？",o:["大結節上面","大結節中面","大結節下面","小結節"],c:1,r:"大結節の中面に停止します。",s:"51ページ"},
    {q:"小円筋の停止部は？",o:["大結節上面","大結節中面","大結節下面","小結節"],c:2,r:"大結節の下面に停止します。",s:"51ページ"},
    {q:"肩甲下筋と大円筋の停止部は、どの筋の深部にあるか？",o:["大胸筋","三角筋","僧帽筋","上腕二頭筋"],c:0,r:"大胸筋の深部（小結節稜付近）に停止するため、前方からは触れにくいです。",s:"51ページ"},

    // 肘・前腕（骨）
    {q:"肘関節を構成する3つの関節に含まれないのは？",o:["腕尺関節","腕橈関節","近位橈尺関節","遠位橈尺関節"],c:3,r:"遠位橈尺関節は手首側の関節です。",s:"99ページ"},
    {q:"上腕骨内側上顆と外側上顆、より突出しているのは？",o:["内側上顆","外側上顆","同じ","個人差"],c:0,r:"内側上顆の方がより大きく突出しています。",s:"99ページ"},
    {q:"上腕骨小頭は橈骨頭と関節するが、触診できる肢位は？",o:["伸展位","屈曲位","回内位","回外位"],c:1,r:"肘屈曲位で橈骨頭のすぐ近位に触れることができます。",s:"99ページ"},
    {q:"尺骨神経が走行する「尺骨神経溝」はどこにあるか？",o:["内側上顆の後方","外側上顆の後方","肘頭の上","前腕の中央"],c:0,r:"内側上顆の後面にある溝を走行します。",s:"100ページ"},
    {q:"橈骨頭は上腕骨外側上顆のどの位置にあるか？",o:["遠位","近位","内側","後方"],c:0,r:"外側上顆のすぐ遠位にあり、回内外で回転するのが触れられます。",s:"106ページ"},
    {q:"橈骨粗面は橈骨頭からどの程度遠位か？",o:["指2本分","指5本分","手首の近く","肘頭の裏"],c:0,r:"橈骨頭から約2横指遠位にある骨隆起です。",s:"106ページ"},
    {q:"「肘の目印」といわれる尺骨の部位は？",o:["肘頭","鉤状突起","茎状突起","橈骨切痕"],c:0,r:"肘の後方に突出した骨が肘頭です。",s:"111ページ"},
    {q:"肘頭窩はどの骨にあるか？",o:["上腕骨","尺骨","橈骨","肩甲骨"],c:0,r:"上腕骨遠位後面にある窪みで、伸展時に肘頭がはまり込みます。",s:"111ページ"},
];
// --- 問題プール パート2 (肘・前腕・手・システム) ---
const poolPart2 = [
    // 肘・前腕（筋・靭帯）
    [cite_start]{q:"橈骨輪状靭帯の役割は？",o:["橈骨頭を尺骨に固定し、回内・回外を安定させる","肘の屈伸を制限する","手首を固定する","指を伸ばす"],c:0,r:"橈骨頭を尺骨の橈骨切痕に押し付け、回旋運動をガイドします[cite:1014]。"},
    [cite_start]{q:"外側側副靭帯（LCL）の触診位置は？",o:["外側上顆と橈骨頭の間","内側上顆の下","肘頭の上","前腕の中央"],c:0,r:"上腕骨外側上顆と橈骨輪状靭帯をつなぐように走行しています[cite:1014]。"},
    [cite_start]{q:"尺側手根伸筋の付着部（停止）は？",o:["第5中手骨底","第2中手骨底","有鉤骨","豆状骨"],c:0,r:"第5中手骨底の背側に停止します[cite:1015]。"},
    [cite_start]{q:"腕橈骨筋の作用は？",o:["肘関節屈曲・前腕中間位への回旋","肘伸展","手首の背屈","指の伸展"],c:0,r:"肘関節を屈曲させ、前腕を回外位・回内位から中間位に戻す作用があります[cite:1015]。"},
    [cite_start]{q:"長橈側手根伸筋の停止部は？",o:["第2中手骨底背側","第3中手骨底","橈骨茎状突起","舟状骨"],c:0,r:"第2中手骨底の背側に停止します[cite:1015]。"},
    [cite_start]{q:"短橈側手根伸筋の停止部は？",o:["第3中手骨底背側","第2中手骨底","第5中手骨底","有頭骨"],c:0,r:"第3中手骨底の背側に停止します[cite:1015]。"},
    [cite_start]{q:"回外筋の触診位置は？",o:["橈骨頭の遠位、前腕背外側","肘窩","内側上顆の下","手首"],c:0,r:"上腕骨外側上顆から橈骨近位外側面へ巻きつくように走行しています[cite:1016]。"},
    [cite_start]{q:"肘筋の作用は？",o:["肘伸展の補助・関節包の挟み込み防止","肘屈曲","回外","手首の伸展"],c:0,r:"肘頭の外側面に付着し、伸展時に肘関節包を引く役割があります[cite:1016]。"},
    {q:"テニス肘（上腕骨外側上顆炎）で障害されやすい筋は？",o:["短橈側手根伸筋","尺側手根伸筋","長母指伸筋","腕橈骨筋"],c:0,r:"短橈側手根伸筋の起始部（外側上顆）での微細損傷が主な原因とされます（※臨床知識）。"},

    // 手関節（骨）
    [cite_start]{q:"橈骨茎状突起と尺骨茎状突起、どちらが遠位（指先側）にあるか？",o:["橈骨茎状突起","尺骨茎状突起","同じ高さ","個人差"],c:0,r:"橈骨茎状突起の方が約1cmほど遠位に位置しています[cite:1027]。"},
    [cite_start]{q:"リスター結節（背側結節）があるのはどの骨か？",o:["橈骨","尺骨","舟状骨","月状骨"],c:0,r:"橈骨遠位端の背側にある突起で、長母指伸筋腱の滑車となります[cite:1028]。"},
    [cite_start]{q:"リスター結節の橈側（親指側）を通る腱は？",o:["短橈側手根伸筋","長母指伸筋","総指伸筋","尺側手根伸筋"],c:0,r:"リスター結節の橈側を短橈側手根伸筋、尺側を長母指伸筋が通ります[cite:1028]。"},
    [cite_start]{q:"前腕の回内・回外可動域を測定する際の移動軸は？",o:["橈骨茎状突起と尺骨頭を結ぶ線","第3中手骨","手掌面","母指"],c:0,r:"手関節での代償を除くため、橈骨と尺骨の遠位端を結ぶ線を基準にします[cite:1029]。"},
    {q:"尺骨頭が顕著に突出して見えるのはどの肢位か？",o:["回内位","回外位","中間位","屈曲位"],c:0,r:"前腕を回内すると、尺骨頭が手首の背側に突出して触れやすくなります（※臨床知識）。"},

    // 手根骨
    [cite_start]{q:"近位手根列を構成する骨は（橈側から順に）？",o:["舟状骨・月状骨・三角骨・豆状骨","大菱形骨・小菱形骨・有頭骨・有鉤骨","舟状骨・大菱形骨・小菱形骨","月状骨・有頭骨・有鉤骨"],c:0,r:"近位列は舟状骨、月状骨、三角骨、豆状骨です[cite:1034]。"},
    [cite_start]{q:"遠位手根列を構成する骨は（橈側から順に）？",o:["大菱形骨・小菱形骨・有頭骨・有鉤骨","舟状骨・月状骨・三角骨・豆状骨","有頭骨・有鉤骨・三角骨","大菱形骨・舟状骨・月状骨"],c:0,r:"遠位列は大菱形骨、小菱形骨、有頭骨、有鉤骨です[cite:1034]。"},
    [cite_start]{q:"解剖学的嗅ぎタバコ窩（スナッフボックス）の底で触れる骨は？",o:["舟状骨","月状骨","有頭骨","豆状骨"],c:0,r:"長母指伸筋腱と短母指伸筋腱の間で舟状骨を触れます[cite:1136]。"},
    [cite_start]{q:"舟状骨骨折で圧痛が出やすい部位は？",o:["スナッフボックス","豆状骨の上","手掌中央","尺骨茎状突起"],c:0,r:"スナッフボックス（嗅ぎタバコ窩）の圧痛は舟状骨骨折を示唆します[cite:1136]。"},
    [cite_start]{q:"手根管を形成する尺側の骨隆起は？",o:["豆状骨と有鉤骨鉤","舟状骨結節と大菱形骨結節","橈骨と尺骨","第1中手骨と第5中手骨"],c:0,r:"尺側は豆状骨と有鉤骨鉤、橈側は舟状骨結節と大菱形骨結節で構成されます[cite:1036]。"},
    [cite_start]{q:"有頭骨の位置は？",o:["第3中手骨底の近位","第1中手骨底の近位","第5中手骨底の近位","手首の端"],c:0,r:"手根骨の中で最も大きく、第3中手骨の近位に位置します[cite:1049]。"},
    [cite_start]{q:"豆状骨に停止する筋は？",o:["尺側手根屈筋","橈側手根屈筋","長掌筋","円回内筋"],c:0,r:"尺側手根屈筋は豆状骨に付着し、そこから靭帯を介して有鉤骨や第5中手骨につながります[cite:1004]。"},

    // 手指（骨・関節）
    [cite_start]{q:"中手骨頭はどの関節を構成するか？",o:["MP関節","CM関節","PIP関節","DIP関節"],c:0,r:"中手骨の遠位端（頭）は基節骨とMP関節を構成します[cite:1049]。"},
    [cite_start]{q:"第1中手骨と関節する手根骨は？",o:["大菱形骨","小菱形骨","有頭骨","有鉤骨"],c:0,r:"母指のCM関節は第1中手骨と大菱形骨で形成されます[cite:1049]。"},
    {q:"ボクサー骨折で折れやすい部位は？",o:["第5中手骨頚部","第1中手骨底","舟状骨","基節骨"],c:0,r:"拳で殴った際に第5中手骨頚部を骨折することが多いです（※臨床知識）。"},
    [cite_start]{q:"ヘバーデン結節が生じる関節は？",o:["DIP関節","PIP関節","MP関節","CM関節"],c:0,r:"手指のDIP関節（第一関節）に生じる変形性関節症です[cite:1058]。"},
    {q:"ブシャール結節が生じる関節は？",o:["PIP関節","DIP関節","MP関節","CM関節"],c:0,r:"手指のPIP関節（第二関節）に生じる変形性関節症です（※臨床知識）。"},
    [cite_start]{q:"母指CM関節症で圧痛が出る部位は？",o:["母指の付け根（大菱形骨付近）","母指の先","手首の小指側","肘"],c:0,r:"第1中手骨底と大菱形骨の間の関節裂隙に圧痛が出ます[cite:1056]。"},

    // 手指（筋・腱）
    [cite_start]{q:"浅指屈筋の作用は？",o:["PIP関節の屈曲","DIP関節の屈曲","MP関節の伸展","母指の屈曲"],c:0,r:"主に第2〜5指のPIP関節を屈曲させます[cite:1065]。"},
    [cite_start]{q:"深指屈筋の作用は？",o:["DIP関節の屈曲","PIP関節のみ屈曲","MP関節の伸展","手首の伸展"],c:0,r:"主に第2〜5指のDIP関節を屈曲させます[cite:1065]。"},
    [cite_start]{q:"浅指屈筋と深指屈筋の触診での鑑別点は？",o:["PIP関節を曲げるか、DIP関節を曲げるか","手首を曲げるか","親指を曲げるか","肘を曲げるか"],c:0,r:"PIP屈曲で浅指屈筋、DIP屈曲で深指屈筋の収縮を確認します[cite:1065]。"},
    [cite_start]{q:"総指伸筋腱が停止する部位は？",o:["末節骨底（指背腱膜を介して）","中手骨頭","基節骨底","手根骨"],c:0,r:"指背腱膜となり、中節骨と末節骨に停止して指全体を伸展させます[cite:1066]。"},
    [cite_start]{q:"長母指伸筋腱が通る「リスター結節の尺側」は伸筋支帯の何区画か？",o:["第3区画","第1区画","第2区画","第4区画"],c:0,r:"長母指伸筋は第3区画を通ります（リスター結節が第2と第3の境界）[cite:1028]。"},
    {q:"ドケルバン病で疼痛が生じる腱は？",o:["長母指外転筋腱と短母指伸筋腱","長母指伸筋腱","総指伸筋腱","尺側手根伸筋腱"],c:0,r:"橈骨茎状突起部（第1区画）を通るこの2つの腱の狭窄性腱鞘炎です（※臨床知識）。"},
    [cite_start]{q:"母指球筋に含まれない筋は？",o:["母指内転筋","短母指外転筋","短母指屈筋","母指対立筋"],c:0,r:"母指内転筋は母指球筋ではなく、中手筋（深層）に分類されることが多いですが、機能的には母指球と共に働きます。狭義の母指球筋（浅層）は外転・屈曲・対立筋です[cite:1080]。"},
    [cite_start]{q:"小指球筋を構成する3つの筋は？",o:["小指外転筋・短小指屈筋・小指対立筋","小指伸筋・虫様筋・骨間筋","長掌筋・短掌筋・小指屈筋","円回内筋・方形回内筋・回外筋"],c:0,r:"小指外転筋、短小指屈筋、小指対立筋の3つです[cite:1082]。"},
    [cite_start]{q:"虫様筋の起始部は？",o:["深指屈筋腱","浅指屈筋腱","中手骨","手根骨"],c:0,r:"深指屈筋腱から起始し、指背腱膜に停止します[cite:1096]。"},
    [cite_start]{q:"虫様筋の作用は？",o:["MP屈曲・IP伸展","MP伸展・IP屈曲","全指屈曲","全指伸展"],c:0,r:"MP関節を屈曲させつつ、PIP・DIP関節を伸展させる（骨間筋と共に）作用があります[cite:1095]。"},
    [cite_start]{q:"背側骨間筋の作用は？",o:["指の外転（開く）","指の内転（閉じる）","指の屈曲のみ","母指の対立"],c:0,r:"DAB（Dorsal Abduct）＝背側は外転、PAD（Palmar Adduct）＝掌側は内転です[cite:1095]。"},
    [cite_start]{q:"掌側骨間筋の作用は？",o:["指の内転（閉じる）","指の外転（開く）","手首の屈曲","母指の伸展"],c:0,r:"指を中心に集める（内転）作用があります[cite:1095]。"},

    // 神経・血管
    [cite_start]{q:"手根管を通過する神経は？",o:["正中神経","尺骨神経","橈骨神経","筋皮神経"],c:0,r:"正中神経が手根管（屈筋支帯の下）を通過します[cite:1036]。"},
    [cite_start]{q:"手根管症候群で痺れが出る指は？",o:["母指〜環指橈側","小指","手背全体","前腕外側"],c:0,r:"正中神経領域である母指から環指の橈側半分に痺れが生じます[cite:1138]。"},
    [cite_start]{q:"Guyon管（ギヨン管）を通過する神経は？",o:["尺骨神経","正中神経","橈骨神経","腋窩神経"],c:0,r:"豆状骨と有鉤骨の間にあるGuyon管を尺骨神経が通過します[cite:1134]。"},
    {q:"尺骨神経麻痺で特有の指の変形は？",o:["鷲手（わしで）","下垂手","猿手","ボタンホール変形"],c:0,r:"骨間筋・虫様筋の麻痺により、環指・小指のMP過伸展・IP屈曲位（鷲手）を呈します（※臨床知識）。"},
    [cite_start]{q:"正中神経麻痺（低位）で特有の母指の変形は？",o:["猿手","鷲手","下垂手","スワンネック"],c:0,r:"母指球筋の萎縮により、母指が他の指と同じ平面に並ぶ「猿手」になります[cite:1138]。"},
    [cite_start]{q:"橈骨神経麻痺で特有の手の症状は？",o:["下垂手（Drop hand）","鷲手","猿手","鉤爪指"],c:0,r:"手関節と手指の伸展ができなくなり、手が垂れ下がる下垂手が生じます[cite:1118]。"},
    [cite_start]{q:"前骨間神経麻痺のスクリーニングテストは？",o:["Perfect Oテスト（涙のしずくサイン）","ファーレンテスト","ティネル徴候","フロマン徴候"],c:0,r:"母指と示指で正円が作れず、涙型（指尖つまみ不可）になるかを確認します[cite:1138]。"},
    [cite_start]{q:"フロマン徴候（Froment sign）は何の麻痺を評価するか？",o:["尺骨神経（母指内転筋）","正中神経","橈骨神経","筋皮神経"],c:0,r:"紙を母指で挟ませた際、母指内転筋麻痺を長母指屈筋（IP屈曲）で代償するかを見ます[cite:1097]。"},
    [cite_start]{q:"手掌の感覚で、小指側1本半を支配するのは？",o:["尺骨神経","正中神経","橈骨神経","筋皮神経"],c:0,r:"小指と環指の尺側半分は尺骨神経支配です[cite:989]。"},
    [cite_start]{q:"手背の感覚で、母指〜中指の背側（爪部除く）を支配するのは？",o:["橈骨神経","正中神経","尺骨神経","腋窩神経"],c:0,r:"手背の橈側半分の感覚は橈骨神経浅枝が支配します[cite:1116]。"},
    [cite_start]{q:"橈骨動脈の拍動確認部位は？",o:["手関節橈側（橈側手根屈筋腱の外側）","手関節尺側","肘窩","腋窩"],c:0,r:"手首の親指側、橈側手根屈筋腱の外側で拍動を触れます[cite:1136]。"},
    [cite_start]{q:"上腕二頭筋内側溝を走行する神経は？",o:["正中神経・尺骨神経","橈骨神経","腋窩神経","筋皮神経"],c:0,r:"上腕二頭筋の内側縁（内側溝）を正中神経、尺骨神経、上腕動脈が走行します[cite:1125]。"},
    [cite_start]{q:"肘部管症候群の原因となる神経は？",o:["尺骨神経","正中神経","橈骨神経","筋皮神経"],c:0,r:"肘の内側（肘部管）で尺骨神経が圧迫されて生じます[cite:983]。"},
    [cite_start]{q:"回内筋症候群で圧迫される神経は？",o:["正中神経","尺骨神経","橈骨神経","腋窩神経"],c:0,r:"円回内筋の二頭の間で正中神経が絞扼される障害です[cite:1138]。"},
];

// 3つのプールを結合
const questionPool = poolPart1.concat(poolPart2);

// シャッフル関数
function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

// クイズ状態管理
let currentQuizSet = [];
let currentQuestionIndex = 0;
let score = 0;

// 定数
const QUESTIONS_PER_ROUND = 30;

// DOM要素取得
const startScreen = document.getElementById('start-screen');
const quizScreen = document.getElementById('quiz-screen');
const resultScreen = document.getElementById('result-screen');
const questionBox = document.getElementById('question');
const optionsBox = document.getElementById('options');
const feedbackBox = document.getElementById('feedback');
const nextBtn = document.getElementById('next-btn');
const progress = document.getElementById('progress');
const scoreDisplay = document.getElementById('score');

// クイズ開始
function startQuiz() {
    // 全問題からランダムに30問抽出
    currentQuizSet = shuffle([...questionPool]).slice(0, QUESTIONS_PER_ROUND);
    currentQuestionIndex = 0;
    score = 0;
    
    startScreen.style.display = 'none';
    resultScreen.style.display = 'none';
    quizScreen.style.display = 'block';
    
    showQuestion();
}

// リセット（最初に戻る）
function resetQuiz(force = false) {
    if (force || confirm("最初の画面に戻りますか？")) {
        startScreen.style.display = 'block';
        quizScreen.style.display = 'none';
        resultScreen.style.display = 'none';
    }
}

// 問題表示
function showQuestion() {
    const q = currentQuizSet[currentQuestionIndex];
    questionBox.textContent = `Q${currentQuestionIndex + 1}. ${q.q}`;
    optionsBox.innerHTML = '';
    feedbackBox.style.display = 'none';
    feedbackBox.className = 'feedback';
    nextBtn.classList.remove('active');
    
    progress.textContent = `問 ${currentQuestionIndex + 1} / ${QUESTIONS_PER_ROUND}`;
    scoreDisplay.textContent = `正解数: ${score}`;

    q.o.forEach((option, index) => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.textContent = option;
        btn.onclick = () => checkAnswer(index, btn, q);
        optionsBox.appendChild(btn);
    });
}

// 正誤判定
function checkAnswer(selectedIndex, selectedBtn, q) {
    if (nextBtn.classList.contains('active')) return; // 連打防止

    const isCorrect = (selectedIndex === q.c);
    const allBtns = document.querySelectorAll('.option-btn');

    if (isCorrect) {
        selectedBtn.classList.add('correct');
        feedbackBox.innerHTML = `<strong>正解！</strong><br>${q.r}<span class="source-ref">参照：${q.s}</span>`;
        feedbackBox.className = 'feedback';
        score++;
        scoreDisplay.textContent = `正解数: ${score}`; // 修正済み
    } else {
        selectedBtn.classList.add('incorrect');
        // 正解のボタンを強調
        allBtns[q.c].classList.add('correct');
        feedbackBox.innerHTML = `<strong>不正解...</strong><br>正解は「${q.o[q.c]}」です。<br>${q.r}<span class="source-ref">参照：${q.s}</span>`;
        feedbackBox.className = 'feedback error';
    }

    feedbackBox.style.display = 'block';
    nextBtn.classList.add('active');
}

// 次の問題へ
function nextQuestion() {
    currentQuestionIndex++;
    if (currentQuestionIndex < QUESTIONS_PER_ROUND) {
        showQuestion();
    } else {
        showResult();
    }
}

// 結果画面
function showResult() {
    quizScreen.style.display = 'none';
    resultScreen.style.display = 'block';
    
    const finalScoreEl = document.getElementById('final-score');
    const commentEl = document.getElementById('result-comment');
    
    finalScoreEl.textContent = score;
    
    const percentage = (score / QUESTIONS_PER_ROUND) * 100;
    let comment = "";
    let color = "";

    if (percentage === 100) {
        comment = "完璧です！触診マニュアルを完全にマスターしています。";
        color = "#27ae60"; // Green
    } else if (percentage >= 80) {
        comment = "素晴らしい！合格ライン達成です。現場で活かしましょう。";
        color = "#2980b9"; // Blue
    } else if (percentage >= 60) {
        comment = "惜しい！あと少しです。間違えた箇所を復習しましょう。";
        color = "#f39c12"; // Orange
    } else {
        comment = "知識の定着が必要です。マニュアルを読み返して再挑戦しましょう。";
        color = "#c0392b"; // Red
    }

    commentEl.textContent = comment;
    commentEl.style.color = color;
}
</script>
</body>
</html>